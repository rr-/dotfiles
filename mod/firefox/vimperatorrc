"default search engine
"used to be duckduckgo but it sucks too much

map , <Leader>

"ctrl + a
inoremap <C-a> <C-Home><C-S-End>
cnoremap <C-a> <C-Home><C-S-End>

"use Firefox version of ctrl + c and ctrl + v
noremap <C-c> <C-v><C-c>
noremap <C-v> <C-v><C-v>

"prevent c-i hijacking on github... by adding alternative
inoremap <C-S-i> <C-i>

"easy paging
set previouspattern='\bprev\b|\bprevious\b,^<$,^(<<|«)$,^(<|«),(<|«)$'
noremap < [[
noremap > ]]

"long jump
noremap J 50j
noremap K 50k

nnoremap <C-q> :xall<CR>

 "fix hints on youtube
highlight Hint -append z-index:2999999999

"disable history autocomplete
set complete=sl

"disable everything but tabs
set gui=none,tabs

"use smaller set of characters for hints to ease single handed navigation
set hintchars=123456

"automatically follow typed hint after a while
set hinttimeout=750

"don't display anything extra in hints, just the numbers
set showtexthints=false

"disable scrollbars
set scrollbars=false

"show small numbers above each tab
set tabnumbers=true

"vimperator issue #590
js services.services.autoCompleteSearch.class_="@mozilla.org/autocomplete/search;1?name=unifiedcomplete"

"fit image to window
noremap zf :set! browser.enable_automatic_image_resizing=true<CR><Esc>:reload<CR>

"show image at original size
noremap zo :set! browser.enable_automatic_image_resizing=false<CR><Esc>:reload<CR>

"play current url with mpv
nnoremap <leader>m :silent :execute "!mpv --fullscreen \"" + content.location.href + "\" &"<CR>

"play hinted url with mpv
javascript <<EOS
    function extractLink(node) {
        if (node.tagName === 'A') {
            return node.getAttribute('href');
        }
        for (let child of node.getElementsByTagName('a')) {
            if (child.getAttribute('href')) {
                return child.getAttribute('href');
            }
        }
        while (node) {
            node = node.parentNode;
            if (node.tagName === 'A' && node.getAttribute('href')) {
                return node.getAttribute('href');
            }
        }
        return null;
    }

    hints.addMode('m', 'Open with mpv:', (elem, loc) => {
        let link = extractLink(elem);
        if (!link) {
            liberator.echoerr('Link item doesn\'t exists.');
            return;
        }
        liberator.execute("silent !mpv --fs --ytdl --ytdl-format='(mp4)[height>=720][height<=?1080][fps>=30]+bestaudio' '" + link + "' &", null, true);
    });
EOS
