#!/bin/python3
import os
from subprocess import run, PIPE

if run(['pgrep', 'ibus-daemon'], stdout=PIPE).returncode != 0:
    print('starting daemon')
    subprocess.run(os.path.expanduser('~/.config/ibus/start'))

engine = run(['ibus', 'engine'], stdout=PIPE).stdout.decode().strip()
if engine != 'anthy':
    run(['ibus', 'engine', 'anthy'])
else:
    run(['ibus', 'engine', 'xkb:pl::pol'])
