#!/bin/python3
# Used to crop/cut videos to specific times.

import os
import argparse
from subprocess import run


def parse_args():
    parser = argparse.ArgumentParser(description='Crop the video stream')
    parser.add_argument(
        '-s', '--start', metavar='TIME', dest='start', required=True,
        help='start position')
    parser.add_argument(
        '-e', '--end', metavar='TIME', dest='end', required=True,
        help='end position')
    parser.add_argument(
        metavar='INPUT_PATH', dest='input_path', help='input video')
    parser.add_argument(
        metavar='OUTPUT_PATH', nargs='?', dest='output_path',
        help='where to save the output stream',
        default=os.path.expanduser('~/output.webm'))
    return parser.parse_args()


def main(args):
    print(args.input_path)
    run([
        'ffmpeg',
        '-i', args.input_path,
        '-ss', args.start,
        '-to', args.end,
        '-vf', 'subtitles=' + args.input_path,
        '-c:v', 'libvpx-vp9',
        args.output_path])


if __name__ == '__main__':
    main(parse_args())
