#
# executing various programs
#

# dmenu (a program launcher)
super + {r, d}
    dmenu_run
alt + F2
    dmenu_run

# focus or spawn local tmux
alt + ctrl + bracketleft
    xdotool search --classname local_terminal windowactivate; \
    if [ $? -ne 0 ]; then; \
        urxvt -name local_terminal -e zsh -ilc 'tmux attach-session || tmux new-session -c ~'; \
    else; \
        tmux new-window -t work; \
    fi

# spawn plain terminal
alt + ctrl + shift + bracketleft
    cd && urxvt

# focus or spawn irc
alt + ctrl + m
    ~/.config/sxhkd/run-or-raise -cn drizzle -p "urxvt -name drizzle -e zsh -ilc 'while :; do ssh drizzle -t "'"zsh -ilc tmux\ attach\ -t\ main\|\|tmux\ new-session\ -t\ main"'"; sleep 1; done'"

# focus or spawn irc, and detach all other sessions
alt + ctrl + shift + m
    ~/.config/sxhkd/run-or-raise -cn drizzle -p "urxvt -name drizzle -e zsh -ilc 'ssh drizzle -t "'"zsh -ilc tmux\ attach\ -d\ -t\ main\|\|tmux\ new-session\ -t\ main"'"'"

# spawn web browser
alt + ctrl + semicolon
    ~/.config/sxhkd/run-or-raise -n browser -p "xdg-open 'about:blank'"



#
# music and audio
#

# volume up and down
super + {x,X}
    dir={+,-}; \
    sink=$(pactl get-default-sink); \
    pactl -- set-sink-volume ${sink} ${dir}'5%'



#
# window manager
#

# transparency
super + {button5,button4}
    picom-trans -c {-,+}5
super + {z,Z}
    picom-trans -c {-,+}5

# close active window
super + q
    wmctrl -c :ACTIVE:

# focus window in given direction
super + {h,j,k,l}
    DIR={west,south,north,east}; \
    bspc node -f $DIR || ( bspc monitor -f $DIR; bspc node -f @/1.floating )

# move window in given direction
super + shift + {h,j,k,l}
    DIR={west,south,north,east}; \
    bspc node -s $DIR

# focus workspace
super + {1-6}
    TARGET={1-6}; \
    bspc desktop -f $TARGET

# send active window to given another workspace
super + shift + {1-6}
    TARGET={1-6}; \
    ID=$(xdotool getactivewindow); \
    bspc node -d $TARGET && bspc node -f $ID

# maximize the window
super + Up
    wmctrl -r :ACTIVE: -b add,maximized_horz; \
    wmctrl -r :ACTIVE: -b add,maximized_vert

# restore the window
super + Down
    wmctrl -r :ACTIVE: -b remove,maximized_horz; \
    wmctrl -r :ACTIVE: -b remove,maximized_vert

# set current window as fullscreen
super + f
    wmctrl -r :ACTIVE: -b toggle,fullscreen

# reload sxhkd configuration
alt + F12
    killall -SIGUSR1 sxhkd

# reload bspwm configuration
alt + shift + F12
    bash -c '~/.config/bspwm/bspwmrc'

# screenshots
# window
super + i
    sh -c 'shot -s && mpv ~/.local/share/beep-shot.mp3 >/dev/null'|clip
# interactive
super + shift + i
    sh -c 'shot -i && mpv ~/.local/share/beep-shot.mp3 >/dev/null'|clip
# desktop
super + alt + i
    sh -c 'shot -d && mpv ~/.local/share/beep-shot.mp3 >/dev/null'|clip
